extends ../layout
include ./includes/conditionalFormButton
include ./includes/startContinueChangeButton
include ./includes/startContinueChangeMultiButton
include ./includes/changeLink
include ./includes/continueButton
include ./includes/taskListButton
include ./includes/viewButton
include ./includes/viewEditButton
include ./includes/utils


block content

  if user.role === 'CA' && licenceVersion !== 0
    include ../includes/back-caselist-and-forms
  else
    include ../includes/backToCaseList

  if licenceStatus.decisions.excluded
    div.error-banner.marginTopMedium
      strong.bold The offender is statutorily excluded from HDC
  else if licenceStatus.decisions.unsuitableResult
    div.error-banner.marginTopMedium
      strong.bold The offender is presumed unsuitable for HDC release
  else if licenceStatus.decisions.refused
    div.error-banner.marginTopMedium
      strong.bold Home detention curfew refused - #{licenceStatus.decisions.refusalReason}
  else if licenceStatus.decisions.optedOut
    div.error-banner.marginTopMedium
      strong.bold The offender has opted out from Home Detention Curfew

  if !user.role
    p Error
  else
    if errorObject
    div.largeMarginBottom
    if errorObject && Object.keys(errorObject).length !== 0
      div.error-summary(role="alert" aria-labelledby="error-summary-heading" tabindex="-1")
        h2.heading-medium.error-summary-heading.center.noMargin.smallPaddingTopBottom#error-summary-heading
          | There is a problem
        ul.error-summary-list
          each errorMsg in errorObject
            li.error #{errorMsg}
    include prisonerDetails

    div.paddingBottom
      block tasks
