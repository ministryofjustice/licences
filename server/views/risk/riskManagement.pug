extends ../layout

include mixins

block content

  div.pure-g
    .pure-u-1
      include ../includes/backToTaskList
      include ../includes/personalDetailsSummary

      h2.heading-large Risk management

    .pure-u-1.pure-u-md-1-2
      form(method="post")
        input(type="hidden" name="_csrf" value=csrfToken)
        input(type="hidden" name="bookingId" value=bookingId || '')
        div.paddingBottom.largeMarginBottom

          div.form-group.inline.smallPaddingTop
            p Are there checks you need to carry out to decide if the address is suitable?
              span.form-hint For example, police or social services checks.

            div.multiple-choice
              input#planningYes(type="radio" checked=data.planningActions === 'Yes' name="planningActions" value="Yes")
              label(for="planningYes") Yes
            div.multiple-choice
              input#planningNo(type="radio" checked=data.planningActions === 'No' name="planningActions" value="No")
              label(for="planningNo") No

          div.form-group.inline.smallPaddingTop
            p Are you still waiting for information?

            div.multiple-choice
              input#awaitingYes(type="radio" checked=data.awaitingInformation === 'Yes' name="awaitingInformation" value="Yes")
              label(for="awaitingYes") Yes
            div.multiple-choice
              input#awaitingNo(type="radio" checked=data.awaitingInformation === 'No' name="awaitingInformation" value="No")
              label(for="awaitingNo") No

          div.form-group
            label(for='riskManagementDetails') Provide details of your checks. If you're waiting for information explain what it is and when you should get it. (optional)
            textarea(name='riskManagementDetails' id='riskManagementDetails' class='form-control' rows='5' aria-label="Provide details of when you expect to get the information")
              if data.riskManagementDetails
                | #{data.riskManagementDetails}

          div.form-group.inline.smallPaddingTop
            p Is the address proposed by the offender suitable?

            div.multiple-choice
              input#suitableYes(type="radio" checked=data.proposedAddressSuitable === 'Yes' name="proposedAddressSuitable" value="Yes")
              label(for="suitableYes") Yes
            div.multiple-choice(data-target="reasonForm")
              input#suitableNo(type="radio" checked=data.proposedAddressSuitable === 'No' name="proposedAddressSuitable" value="No")
              label(for="suitableNo") No

            div#reasonForm.panel.panel-border-narrow.js-hidden
              label(for='unsuitableReason') Please explain why you have made this decision
                textarea(name='unsuitableReason' id='unsuitableReason' class='form-control' rows='5' aria-label="Explain why the address is unsuitable")
                  if data.unsuitableReason
                    | #{data.unsuitableReason}


          if user.role === 'RO'
            div.form-group.inline.smallPaddingTop
              h3.heading-small Non-disclosable information
              p Do you have information that cannot be disclosed to the offender?

              div.multiple-choice(data-target="reasonFormNonDisclosableInformation")
                input#nonDisclosableYes(type="radio" checked=data.hasNonDisclosableInformation === 'Yes' name="hasNonDisclosableInformation" value="Yes")
                label(for="nonDisclosableYes") Yes

              div.multiple-choice
                input#nonDisclosableNo(type="radio" checked=data.hasNonDisclosableInformation === 'No' name="hasNonDisclosableInformation" value="No")
                label(for="nonDisclosableNo") No

              div#reasonFormNonDisclosableInformation.panel.js-hidden
                textarea(name='nonDisclosableInformation' id='nonDisclosableInformation' class='form-control' rows='5', aria-label="Provide the non-disclosable information")
                  if data.nonDisclosableInformation
                    | #{data.nonDisclosableInformation}
                p.paddingTop.bold This information should not be shared with the offender under any circumstance, including where a subject access request is made.
          else
            input(type="hidden" name='hasNonDisclosableInformation' id='hasNonDisclosableInformation' value=data.hasNonDisclosableInformation)
            input(type="hidden" name='nonDisclosableInformation'    id='nonDisclosableInformation'    value=data.nonDisclosableInformation)
            +readOnlyNonDisclosableInformation(data)

                include ../includes/roModificationWarning

        if (action === 'change')
          include ../includes/formSubmit
        else
          include ../includes/saveAndReturn
